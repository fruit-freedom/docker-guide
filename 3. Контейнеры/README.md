В предыдущем уроке мы научились собирать свои собственные образы.
В данном уроке мы научимся использовать собранные ранее образы.

Как ранее отмечалось для *создания* и *запуска* контейнеров из образа изпользуется
[команда](https://docs.docker.com/engine/reference/commandline/run/) `docker run`.



Жизненный цикл контейнера
-------------------------

- Создание (docker create)
- Запуск (docker start)
- Остановка (docker stop)
- Удаление (docker rm)


Создание контейнера
-------------------

Самый базовый вариант использования команды имеет следующий вид:
```
docker run <image name>
```
> Обратите внимание. Все флаги для команды передаются *ДО* названия образа.
> Все последующие параметры будут переданы в точку входа контейнера как cmd arguments.

После вызова этой команды запускается *создается* и *запускается* контейнер.
При этом поток вывода этого контейнера подключается к bash терминалу с которого производился запуск.

Открыв другое окно и выполнив в нем команду `docker ps` для просмотра существующих контейнеров мы
увидим наш контейнер.
По умолчанию докер генерирует для контейнера случайное имя. Для установки собственного значения используется
флаг `--name`.

```
docker run --name my_server server
```

В прошлом уроке мы писали докерфайл для сборки образа веб сервиса. В прошлом уроке нам удалось его запустить,
однако при попытке соединеня с ним вылетает ошибка.
Причиниа ошибки состоит в том, что контейнер имеет свою собственную приватную сеть.
Для взаимодействия с сервисом внутри контейнера необходимо проксировать (или смапить) порт, на котором он слушает. 
Для этого используется флаг `-p`. [Ссылка на документацию](https://docs.docker.com/engine/reference/commandline/run/#publish)
```
docker run --name my_server -p 8080:80 server
```

В данном случае мы проксируем внутренний порт 80 на внешний 8080.

> Сервис внутри контейнера должен слушать на все интерфейсах (0.0.0.0) иначе проксирование не произойдет

Теперь используя команду `curl` мы можем обратиться к нашему сервису:
```
curl http://localhost:8080/
```


Также стоит отметить еще несколько важный флага:
`--detach` - Говорит о том что контейнер необходимо запустить как фоновый процесс (отключив его от текущей сессии shell).


Остановка контейнера
-------------------

```
docker stop <container name>
```

`--rm` - Говорит о том что контейнер после остановки необходимо удалить.


docker start
----

```
docker start <container name>
```

Удаление контейнера
-------------------




docker exec
-----------


```
docker exec -it web bash 
```




